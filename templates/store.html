<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ store.name }} - IZZA PAY</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  <style>
    body.light-mode { background: #fff; color: #000; }
    body.dark-mode { background: #121212; color: #f2f2f2; }

    .store-banner { width: 100%; max-height: 250px; object-fit: cover; margin-bottom: 20px; }
    .store-header { text-align: center; margin-bottom: 30px; }
    .store-description { font-size: 1.1em; margin: 10px auto; max-width: 700px; }

    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
    }
    .product-card {
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 15px;
      text-align: center;
      background: #fafafa;
    }
    .product-card img { max-width: 100%; height: auto; border-radius: 4px; }
    .product-card h3 { margin: 10px 0; }
    .toggle-mode-btn {
      margin: 10px;
      padding: 8px 15px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
  </style>
</head>
<body class="light-mode" style="font-family: {{ store.font or 'Arial, sans-serif' }};">

  {% if store.banner_url %}
  <img src="{{ store.banner_url }}" class="store-banner" alt="Store Banner">
  {% endif %}

  <div class="store-header">
    <h1>{{ store.name }}</h1>
    <p class="store-description">{{ store.description }}</p>
    <button class="toggle-mode-btn" onclick="toggleMode()">Toggle Dark/Light Mode</button>
    <form method="get" action="{{ url_for('search_store_products', store_id=store.id) }}">
      <input type="text" name="q" placeholder="Search this store's products">
      <button type="submit">Search</button>
    </form>
  </div>

  <div class="products-grid">
    {% for product in products %}
    <div class="product-card">
      {% if product.image_url %}
      <img src="{{ product.image_url }}" alt="{{ product.name }}">
      {% endif %}
      <h3>{{ product.name }}</h3>
      <p>{{ product.description }}</p>
      <p><strong>{{ product.price_pi }} Ï€</strong></p>
      <a href="{{ url_for('checkout', product_id=product.id) }}">
        <button>Buy with Pi</button>
      </a>
    </div>
    {% endfor %}
  </div>

  <script>
    function toggleMode() {
      document.body.classList.toggle('dark-mode');
      document.body.classList.toggle('light-mode');
    }
  </script>
</body>
</html>
